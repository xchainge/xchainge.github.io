{"version":3,"sources":["auction-graph.js"],"names":["wei","totalIssued","startTime","endTime","maxTime","chart","chartData","data","pollIntervalId","updateIntervalId","clicked","getCurrentPriceAt","d","getCurrentPrice","status","price_start","price_constant","price_exponent","getTime","detectmob","window","innerWidth","verticalLinePlugin","renderVerticalLine","chartInstance","line","isNaN","x","$","extend","yScale","scales","getDatasetMeta","yAxisID","xScale","xAxisID","getPixelForValue","top","undefined","bottom","color","context","ctx","save","beginPath","strokeStyle","dashed","setLineDash","moveTo","lineTo","stroke","restore","afterDatasetsDraw","easing","config","vLine","push","i","length","Chart","plugins","register","backgroundColorPlugin","beforeDraw","fillStyle","fillRect","width","height","drawGraph","type","options","responsive","maintainAspectRatio","legend","labels","fontColor","fontSize","boxWidth","filter","item","datasets","datasetIndex","tooltips","mode","position","intersect","backgroundColor","callbacks","footer","tooltipItem","label","y","yLabel","toLocaleString","maximumFractionDigits","xAxes","display","time","unit","unitStepSize","tooltipFormat","min","ticks","gridLines","yAxes","id","scaleLabel","labelString","lineHeight","padding","max","autoSkip","callback","digits","toString","afterBuildTicks","lineChart","beforeUpdate","oScale","click","$event","pos","helpers","getRelativePosition","getValueForPixel","toDate","val","console","log","setAlertsValue","updateData","getPriceCurve","start","end","step","target","Date","getPriceCurve2","getInitialData","when","getJSON","ts","now","done","staticRes","statusRes","trigger","staticData","statusData","updateAuctionAddress","tokensOffered","start_time","endDate","fundingTargetData","fundingTargetData2","borderWidth","borderColor","fill","radius","lineTension","borderDash","updateDataAPI","setInterval","month","day","hour","minute","text","fail","jqxhr","textStatus","error","err","searchFor","arr","key","term","toLowerCase","indexOf","fundsRaisedData","auction_stage","histogram","bin_cumulative_sum","forEach","bin","timestamped_bins","unshift","nowX","Math","abs","nowY","round","price","raised_eth","update","_data","clearClickedVline","document","ready"],"mappings":";;AAAA,IAAIA,MAAM,IAAV;AACA,IAAIC,WAAJ;AACA,IAAIC,SAAJ,EAAeC,OAAf,EAAwBC,OAAxB;AACA,IAAIC,QAAQ,EAAZ;AAAA,IAAgBC,YAAY,EAA5B;AAAA,IAAgCC,IAAhC;AACA,IAAIC,cAAJ,EAAoBC,gBAApB;AACA,IAAIC,OAAJ;;AAEA,SAASC,iBAAT,CAA2BC,CAA3B,EAA8B;AAC1B,WAAOC,gBACHN,KAAKO,MAAL,CAAYC,WADT,EAEHR,KAAKO,MAAL,CAAYE,cAFT,EAGHT,KAAKO,MAAL,CAAYG,cAHT,EAIH,CAACL,EAAEM,OAAF,KAAchB,UAAUgB,OAAV,EAAf,IAAsC,GAJnC,IAKHlB,GALJ;AAMH;;AAED,SAASmB,SAAT,GAAqB;AACjB,QAAGC,OAAOC,UAAP,IAAqB,GAAxB,EAA8B;AAC1B,eAAO,IAAP;AACH,KAFD,MAEO;AACH,eAAO,KAAP;AACH;AACJ;;AAED,IAAIC,qBAAqB;AACrBC,wBAAoB,4BAASC,aAAT,EAAwBC,IAAxB,EAA8B;AAC9C;AACA,YAAI,CAACC,MAAMD,IAAN,CAAL,EAAkB;AACdA,mBAAO,EAACE,GAAGF,IAAJ,EAAP;AACH,SAFD,MAEO;AACHA,mBAAOG,EAAEC,MAAF,CAAS,EAAT,EAAaJ,IAAb,CAAP;AACH;AACD,YAAIK,SAASzB,MAAM0B,MAAN,CAAa1B,MAAM2B,cAAN,CAAqB,CAArB,EAAwBC,OAArC,CAAb;AAAA,YACIC,SAAS7B,MAAM0B,MAAN,CAAa1B,MAAM2B,cAAN,CAAqB,CAArB,EAAwBG,OAArC,CADb;AAEAV,aAAKE,CAAL,GAASO,OAAOE,gBAAP,CAAwBX,KAAKE,CAA7B,CAAT;AACA,YAAIF,KAAKY,GAAL,KAAaC,SAAjB,EAA4B;AACxBb,iBAAKY,GAAL,GAAWP,OAAOO,GAAlB;AACH,SAFD,MAEO;AACHZ,iBAAKY,GAAL,GAAWP,OAAOM,gBAAP,CAAwBX,KAAKY,GAA7B,CAAX;AACH;AACD,YAAIZ,KAAKc,MAAL,KAAgBD,SAApB,EAA+B;AAC3Bb,iBAAKc,MAAL,GAAcT,OAAOS,MAArB;AACH,SAFD,MAEO;AACHd,iBAAKc,MAAL,GAAcT,OAAOM,gBAAP,CAAwBX,KAAKc,MAA7B,CAAd;AACH;AACD,YAAI,CAACd,KAAKe,KAAV,EAAiB;AACbf,iBAAKe,KAAL,GAAa,OAAb;AACH;AACD,YAAIC,UAAUjB,cAAcnB,KAAd,CAAoBqC,GAAlC;AACAD,gBAAQE,IAAR;;AAEA;AACAF,gBAAQG,SAAR;AACAH,gBAAQI,WAAR,GAAsBpB,KAAKe,KAA3B;AACA,YAAIf,KAAKqB,MAAT,EAAiB;AACbL,oBAAQM,WAAR,CAAoB,CAAC,CAAD,EAAI,CAAJ,CAApB;AACH;AACDN,gBAAQO,MAAR,CAAevB,KAAKE,CAApB,EAAuBF,KAAKY,GAA5B;AACAI,gBAAQQ,MAAR,CAAexB,KAAKE,CAApB,EAAuBF,KAAKc,MAA5B;AACAE,gBAAQS,MAAR;AACAT,gBAAQU,OAAR;;AAEA;AACA;AACA;AACA;AACH,KA1CoB;;AA4CrBC,uBAAmB,2BAAS/C,KAAT,EAAgBgD,MAAhB,EAAwB;AACvC,YAAIhD,MAAMiD,MAAN,CAAaC,KAAb,IAAsBlD,MAAMiD,MAAN,CAAaC,KAAb,CAAmBC,IAA7C,EAAmD;AAC/C,iBAAK,IAAIC,IAAE,CAAX,EAAcA,IAAIpD,MAAMiD,MAAN,CAAaC,KAAb,CAAmBG,MAArC,EAA6C,EAAED,CAA/C,EAAkD;AAC9C,oBAAIhC,OAAOpB,MAAMiD,MAAN,CAAaC,KAAb,CAAmBE,CAAnB,CAAX;AACA,qBAAKlC,kBAAL,CAAwBlB,KAAxB,EAA+BoB,IAA/B;AACH;AACJ,SALD,MAKO,IAAIpB,MAAMiD,MAAN,CAAaC,KAAb,KAAuBjB,SAAvB,IAAoC,CAACZ,MAAMrB,MAAMiD,MAAN,CAAaC,KAAnB,CAAzC,EAAoE;AACvE,iBAAKhC,kBAAL,CAAwBlB,KAAxB,EAA+BA,MAAMiD,MAAN,CAAaC,KAA5C;AACH;AACJ;AArDoB,CAAzB;;AAwDAI,MAAMC,OAAN,CAAcC,QAAd,CAAuBvC,kBAAvB;;AAEA,IAAIwC,wBAAwB;AACxBC,gBAAY,oBAASvC,aAAT,EAAwB;AAChC,YAAIkB,MAAMlB,cAAcnB,KAAd,CAAoBqC,GAA9B;AACAA,YAAIsB,SAAJ,GAAgB,aAAhB;AACAtB,YAAIuB,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBzC,cAAcnB,KAAd,CAAoB6D,KAAvC,EAA8C1C,cAAcnB,KAAd,CAAoB8D,MAAlE;AACH;AALuB,CAA5B;;AAQAR,MAAMC,OAAN,CAAcC,QAAd,CAAuBC,qBAAvB;;AAEA,SAASM,SAAT,GAAqB;AACjB,QAAI1B,MAAMd,EAAE,gBAAF,CAAV;AACA,QAAG,CAACT,WAAJ,EAAiB;AACbd,gBAAQ,IAAIsD,KAAJ,CAAUjB,GAAV,EAAe;AACnB2B,kBAAM,MADa;AAEnB9D,kBAAMD,SAFa;AAGnBgE,qBAAS;AACLC,4BAAY,IADP;AAELC,qCAAqB,KAFhB;AAGL;AACA;AACA;AACA;AACAC,wBAAQ;AACJC,4BAAQ;AACJC,mCAAW,OADP;AAEJC,kCAAU,EAFN;AAGJC,kCAAU,EAHN;AAIJC,gCAAQ,gBAAUC,IAAV,EAAgBxE,IAAhB,EAAsB;AAC1B,mCAAOA,KAAKyE,QAAL,CAAcD,KAAKE,YAAnB,EAAiCR,MAAjC,KAA4C,KAAnD;AACH;AANG;AADJ,iBAPH;AAiBLS,0BAAU;AACNC,0BAAM,SADA;AAENC,8BAAU,SAFJ;AAGNC,+BAAW,KAHL;AAINC,qCAAiB,SAJX;AAKNC,+BAAW;AACPC,gCAAQ,gBAAUC,WAAV,EAAuBlF,IAAvB,EAA6B;AACjC,mCAAO,EAAP;AACH,yBAHM;AAIPmF,+BAAO,eAAUD,WAAV,EAAuBlF,IAAvB,EAA6B;AAChC,gCAAImF,QAAQnF,KAAKyE,QAAL,CAAcS,YAAYR,YAA1B,EAAwCS,KAApD;AACA,gCAAIC,IAAIF,YAAYG,MAAZ,CAAmBC,cAAnB,CACJ,IADI,EAEJ,EAACC,uBAAuBJ,SAAS,0BAAT,GAAsC,CAAtC,GAA0C,CAAlE,EAFI,CAAR;AAIA,mCAAO,CAACA,QAAQ,IAAR,GAAeC,CAAhB,CAAP;AACA;AACA;AACA;AACA;AACA;AACH;AAhBM;AALL,iBAjBL;AAyCL5D,wBAAQ;AACJgE,2BAAO,CAAC;AACJC,iCAAS,IADL;AAEJ3B,8BAAM,MAFF;AAGJ4B,8BAAM;AACFC,kCAAM,KADJ;AAEFC,0CAAc,CAFZ;AAGFC,2CAAe,KAHb;AAIFC,iCAAKnG;AAJH,yBAHF;AASJoG,+BAAO;AACH3B,uCAAW,OADR,CACiB;AADjB,yBATH;AAYJ4B,mCAAW;AACP/D,mCAAO;AADA;AAZP,qBAAD,CADH;AAiBJgE,2BAAO,CAAC;AACJC,4BAAI,eADA;AAEJT,iCAAS,IAFL;AAGJ3B,8BAAM,aAHF;AAIJe,kCAAU,MAJN;AAKJsB,oCAAY;AACRV,qCAAS,IADD;AAERW,yCAAa,kBAFL;AAGRC,wCAAY,CAHJ;AAIRjC,uCAAW,OAJH;AAKRC,sCAAU,EALF;AAMRiC,qCAAS;AAND,yBALR;AAaJP,+BAAO;AACH3B,uCAAW,OADR;AAEH0B,iCAAK,GAFF;AAGHS,iCAAK,GAHF;AAIHC,sCAAU,KAJP;AAKHC,sCAAU,kBAAUtB,KAAV,EAAiB;AACvB,oCAAIuB,SAASvB,MAAMwB,QAAN,GAAiBxD,MAA9B;AACA,oCAAIgC,QAAQ,CAAR,KAAc,CAAlB,EAAqB;AACjB,2CAAOA,KAAP;AACH,iCAFD,MAEO,IAAIuB,UAAU,CAAd,EAAiB;AACpB,2CAAOvB,QAAQ,OAAR,GAAkB,IAAzB;AACH,iCAFM,MAEA,IAAIuB,UAAU,CAAd,EAAiB;AACpB,2CAAOvB,QAAQ,IAAR,GAAe,IAAtB;AACH,iCAFM,MAEA;AACH,2CAAOA,KAAP;AACH;AACJ;AAhBE,yBAbH;AA+BJa,mCAAW;AACP/D,mCAAO;AADA,yBA/BP;AAkCJ2E,yCAAiB,yBAAUC,SAAV,EAAqB;AAClCA,sCAAUd,KAAV,GAAkB,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,EAAc,GAAd,EAAmB,GAAnB,EAAwB,GAAxB,EAA6B,GAA7B,CAAlB;AACH,yBApCG;AAqCJe,sCAAc,sBAAUC,MAAV,EAAkB;AAC5B;AACH;AAvCG,qBAAD,EAwCJ;AACCb,4BAAI,OADL;AAECT,iCAAS,IAFV;AAGC;AACAZ,kCAAU,OAJX;AAKCsB,oCAAY;AACRV,qCAAS,IADD;AAERW,yCAAa,iBAFL;AAGRC,wCAAY,CAHJ;AAIRjC,uCAAW,SAJH;AAKRC,sCAAU,EALF;AAMRiC,qCAAS;AAND,yBALb;AAaCP,+BAAO;AACH3B,uCAAW,SADR;AAEH0B,iCAAK,CAFF;AAGHS,iCAAK,KAHF;AAIHC,sCAAU,KAJP;AAKHC,sCAAU,kBAAUtB,KAAV,EAAiB;AACvB,uCAAOA,KAAP;AACH;AAPE,yBAbR;AAsBCa,mCAAW;AACP/D,mCAAO;AADA,yBAtBZ;AAyBC2E,yCAAiB,yBAAUC,SAAV,EAAqB;AAClCA,sCAAUd,KAAV,GAAkB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,CAAlB;AACH,yBA3BF;AA4BCe,sCAAc,sBAAUC,MAAV,EAAkB;AAC5B;AACH;AA9BF,qBAxCI;AAjBH;AAzCH;AAHU,SAAf,CAAR;;AAyIA5E,YAAI6E,KAAJ,CAAU,UAAUC,MAAV,EAAkB;AACxB,gBAAIC,MAAM9D,MAAM+D,OAAN,CAAcC,mBAAd,CAAkCH,MAAlC,EAA0CnH,KAA1C,CAAV;AACA,gBAAIO,IAAIP,MAAM0B,MAAN,CAAa,UAAb,EAAyB6F,gBAAzB,CAA0CH,IAAI9F,CAA9C,EAAiDkG,MAAjD,EAAR;AACA,gBAAIC,MAAMnH,kBAAkBC,CAAlB,IAAuBX,WAAjC;AACA8H,oBAAQC,GAAR,CAAY,GAAZ,EAAiBpH,CAAjB,EAAoBkH,GAApB;AACApH,sBAAU,EAACiB,GAAGf,CAAJ,EAAO+E,GAAGmC,GAAV,EAAV;AACAG;AACAC,uBAAW3H,IAAX;AACH,SARD;AASH;AACJ;;AAED,SAAS4H,aAAT,CAAuBC,KAAvB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACrC,QAAIC,SAAS,EAAb;AACA,QAAI9E,IAAI2E,KAAR;AACA,WAAO3E,IAAI4E,GAAX,EAAgB;AACZE,eAAO/E,IAAP,CAAY;AACR7B,eAAG8B,CADK;AAERkC,eAAGhF,kBAAkB8C,CAAlB,IAAuBxD;AAFlB,SAAZ;AAIAwD,YAAI,IAAI+E,IAAJ,CAAS/E,EAAEvC,OAAF,KAAcoH,IAAvB,CAAJ;AACH;AACDC,WAAO/E,IAAP,CAAY;AACR7B,WAAG0G,GADK;AAER1C,WAAGhF,kBAAkB0H,GAAlB,IAAyBpI;AAFpB,KAAZ;AAIA,WAAOsI,MAAP;AACH;;AAED,SAASE,cAAT,CAAwBL,KAAxB,EAA+BC,GAA/B,EAAoCC,IAApC,EAA0C;AACtC,QAAIC,SAAS,EAAb;AACA,QAAI9E,IAAI2E,KAAR;AACA,WAAO3E,IAAI4E,GAAX,EAAgB;AACZE,eAAO/E,IAAP,CAAY;AACR7B,eAAG8B,CADK;AAERkC,eAAGhF,kBAAkB8C,CAAlB;AAFK,SAAZ;AAIAA,YAAI,IAAI+E,IAAJ,CAAS/E,EAAEvC,OAAF,KAAcoH,IAAvB,CAAJ;AACH;AACDC,WAAO/E,IAAP,CAAY;AACR7B,WAAG0G,GADK;AAER1C,WAAGhF,kBAAkB0H,GAAlB;AAFK,KAAZ;AAIA,WAAOE,MAAP;AACH;;AAED;AACA,SAASG,cAAT,GAA0B;AACtB9G,MAAE+G,IAAF,CACI/G,EAAEgH,OAAF,CAAU,4BAAV,CADJ,EAEIhH,EAAEgH,OAAF,CAAU,4BAAV,EAAwC,EAACC,IAAI,KAAGL,KAAKM,GAAL,EAAR,EAAxC,CAFJ,EAIKC,IAJL,CAIU,UAASC,SAAT,EAAoBC,SAApB,EAA+B;AACjCrH,UAAER,MAAF,EAAU8H,OAAV,CAAkB,QAAlB;AACA3I,eAAO0I,UAAU,CAAV,CAAP;AACA,YAAIE,aAAaH,UAAU,CAAV,CAAjB;AAAA,YACII,aAAa7I,KAAKO,MADtB;;AAGA,YAAIsI,WAAW,0BAAX,CAAJ,EAA4C;AACxCC,iCAAqBD,WAAW,0BAAX,CAArB;AACH;;AAEDnJ,sBAAckJ,WAAWG,aAAzB;AACApJ,oBAAY,IAAIsI,IAAJ,CAASY,WAAWG,UAAX,GAAwB,IAAjC,CAAZ;AACApJ,kBAAU,IAAIqI,IAAJ,CAAS,CAACW,WAAWK,OAAX,IAAuBJ,WAAWG,UAAX,GAAwB,KAAG,MAAnD,IAA8D,IAAvE,CAAV;AACAnJ,kBAAUD,OAAV;;AAEA,YAAIsJ,oBAAoBtB,cAAcjI,SAAd,EAAyBC,OAAzB,EAAkC,KAAlC,EAAyCiJ,UAAzC,CAAxB;AACA,YAAIM,qBAAqBjB,eAAevI,SAAf,EAA0BC,OAA1B,EAAmC,KAAnC,EAA0CiJ,UAA1C,CAAzB;;AAEA9I,oBAAY;AACR0E,sBAAU,CAAC;AACP/C,yBAAS,OADF;AAEPyD,uBAAO,aAFA;AAGPiE,6BAAa,GAHN;AAIPC,6BAAa,SAJN;AAKPrJ,sBAAMmJ,kBALC;AAMPG,sBAAM,KANC;AAOPC,wBAAQ;AAPD,aAAD,EAQR;AACE7H,yBAAS,eADX;AAEEyD,uBAAO,0BAFT;AAGEiE,6BAAa,GAHf;AAIEC,6BAAa,OAJf;AAKErJ,sBAAMkJ,iBALR;AAMEI,sBAAM,KANR;AAOEC,wBAAQ;AAPV,aARQ,EAgBP;AACC7H,yBAAS,eADV;AAECyD,uBAAO,uBAFR;AAGCiE,6BAAa,GAHd;AAICC,6BAAa,oBAJd;AAKCtE,iCAAiB,2BALlB;AAMC/E,sBAAM,EANP;AAOCwJ,6BAAa,CAPd;AAQCD,wBAAQ;AART,aAhBO,EAyBR;AACE7H,yBAAS,eADX;AAEEyD,uBAAO,gBAFT;AAGEkE,6BAAa,OAHf;AAIEI,4BAAY,CAAC,CAAD,EAAG,CAAH,CAJd;AAKEL,6BAAa,CALf;AAMEE,sBAAM,KANR;AAOEpF,wBAAQ,KAPV;AAQElE,sBAAM,EARR;AASEwJ,6BAAa,CATf;AAUED,wBAAQ;AAVV,aAzBQ;AADF,SAAZ;AAuCA1F;AACA6F;AACAzJ,yBAAiB0J,YAAYD,aAAZ,EAA2B,IAA3B,CAAjB;;AAEA;AACA,YAAInC,MAAM5H,UAAU2F,cAAV,CACN,OADM,EACG;AACT,UAACsE,OAAO,OAAR,EAAiBC,KAAK,SAAtB,EAAiCC,MAAM,SAAvC,EAAkDC,QAAQ,SAA1D,EAFM,CAAV;AAIA1I,UAAE,gBAAF,EAAoB2I,IAApB,CAAyBzC,GAAzB;AAEH,KAxEL,EAyEK0C,IAzEL,CAyEU,UAASC,KAAT,EAAgBC,UAAhB,EAA4BC,KAA5B,EAAmC;AACrC,YAAIC,MAAMF,aAAa,IAAb,GAAoBC,KAA9B;AACA5C,gBAAQ4C,KAAR,CAAc,kBAAd,EAAkCC,GAAlC;AACH,KA5EL;AA6EH;;AAED,SAASC,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AAC/B,SAAK,IAAIvH,IAAE,CAAX,EAAcA,IAAEqH,IAAIpH,MAApB,EAA4BD,GAA5B,EAAiC;AAC7B,YAAIqH,IAAIrH,CAAJ,KAAUqH,IAAIrH,CAAJ,EAAOsH,GAAP,CAAV,IAAyBD,IAAIrH,CAAJ,EAAOsH,GAAP,EAAYE,WAAZ,GAA0BC,OAA1B,CAAkCF,KAAKC,WAAL,EAAlC,KAAyD,CAAtF,EAAyF;AACrF,mBAAOH,IAAIrH,CAAJ,CAAP;AACH;AACJ;AACJ;;AAED,SAASyE,UAAT,CAAoB3H,IAApB,EAA0B;;AAEtB,QAAI4K,kBAAkB,EAAtB;;AAEA,QAAI5C,SAAS,CAAC,EAAC5G,GAAE,CAAH,EAAD,CAAb;AACA,QAAIyJ,gBAAgB7K,KAAKO,MAAL,CAAYsK,aAAhC;;AAEA,QAAI7K,KAAK8K,SAAL,IAAkB9K,KAAK8K,SAAL,CAAeC,kBAArC,EAAyD;AACrD/K,aAAK8K,SAAL,CAAeC,kBAAf,CAAkCC,OAAlC,CAA0C,UAASC,GAAT,EAAc/H,CAAd,EAAiB;AACvD,gBAAIA,KAAKlD,KAAK8K,SAAL,CAAeI,gBAAf,CAAgC/H,MAAzC,EAAiD;AACjDyH,4BAAgB3H,IAAhB,CAAqB;AACjB7B,mBAAG,IAAI6G,IAAJ,CAASjI,KAAK8K,SAAL,CAAeI,gBAAf,CAAgChI,CAAhC,IAAqC,IAA9C,CADc;AAEjBkC,mBAAG6F,MAAMxL;AAFQ,aAArB;AAIH,SAND;AAOH;AACD,QAAI,CAACmL,gBAAgBzH,MAArB,EAA4B;AACxByH,0BAAkB,CACd,EAACxJ,GAAGzB,SAAJ,EAAeyF,GAAG,CAAlB,EADc,EAEd,EAAChE,GAAG,IAAI6G,IAAJ,EAAJ,EAAgB7C,GAAG,CAAnB,EAFc,CAAlB;AAIH,KALD,MAKO,IAAIwF,gBAAgB,CAAhB,EAAmBxJ,CAAnB,GAAuBzB,SAA3B,EAAsC;AACzCiL,wBAAgBO,OAAhB,CACI,EAAC/J,GAAGzB,SAAJ,EAAeyF,GAAG,CAAlB,EADJ,EAEI,EAAChE,GAAG,IAAI6G,IAAJ,CAAS2C,gBAAgB,CAAhB,EAAmBxJ,CAAnB,CAAqBT,OAArB,KAA+B,CAAxC,CAAJ,EAAgDyE,GAAG,CAAnD,EAFJ;AAIH;;AAED;AACA,QAAIgG,OAAO,IAAInD,IAAJ,CAASoD,KAAK9E,GAAL,CAChB0B,KAAKM,GAAL,EADgB,EAEhBqC,gBAAgBA,gBAAgBzH,MAAhB,GAAyB,CAAzC,EAA4C/B,CAA5C,CAA8CT,OAA9C,EAFgB,EAGhBhB,UAAUgB,OAAV,EAHgB,CAAT,CAAX;AAKA,QAAIkK,iBAAiB,CAAjB,IAAsBQ,KAAKC,GAAL,CAASF,KAAKzK,OAAL,KAAiBX,KAAKO,MAAL,CAAY,WAAZ,IAAyB,GAAnD,IAA0D,KAApF,EAA2F;AAAE;AACzF6K,eAAOR,gBAAgBA,gBAAgBzH,MAAhB,GAAuB,CAAvC,EAA0C/B,CAAjD;AACH;AACD;;AAEA,QAAImK,OAAOX,gBAAgBA,gBAAgBzH,MAAhB,GAAyB,CAAzC,EAA4CiC,CAAvD;;AAEA;AACAkF,cAAUvK,UAAU0E,QAApB,EAA8B,OAA9B,EAAuC,MAAvC,EAA+CzE,IAA/C,GAAsD,CAAC,EAACoB,GAAGzB,SAAJ,EAAeyF,GAAGmG,IAAlB,EAAD,EAA0B,EAACnK,GAAGxB,OAAJ,EAAawF,GAAGmG,IAAhB,EAA1B,CAAtD;;AAEA;AACA,QAAIH,OAAOR,gBAAgBA,gBAAgBzH,MAAhB,GAAuB,CAAvC,EAA0C/B,CAArD,EAAwD;AACpDwJ,wBAAgB3H,IAAhB,CAAqB,EAAC7B,GAAGgK,IAAJ,EAAUhG,GAAGmG,IAAb,EAArB;AACH;AACDjB,cAAUvK,UAAU0E,QAApB,EAA8B,OAA9B,EAAuC,MAAvC,EAA+CzE,IAA/C,GAAsD4K,eAAtD;;AAEAvJ,MAAE,aAAF,EAAiB2I,IAAjB,CAAsBqB,KAAKG,KAAL,CAAWxL,KAAKO,MAAL,CAAYkL,KAAZ,GAAoB,IAA/B,IAAuC,GAAvC,GAA6C,UAAnE;AACApK,MAAE,YAAF,EAAgB2I,IAAhB,CAAqBqB,KAAKG,KAAL,CAAWxL,KAAKO,MAAL,CAAYmL,UAAZ,GAAyB1L,KAAKO,MAAL,CAAYkL,KAArC,GAA6C,GAAxD,IAA+D,GAA/D,GAAqE,MAA1F;AACApK,MAAE,WAAF,EAAe2I,IAAf,CAAoBqB,KAAKG,KAAL,CAAWxL,KAAKO,MAAL,CAAYmL,UAAZ,GAAyB,IAApC,IAA4C,GAA5C,GAAkD,MAAtE;;AAEA5L,UAAM6L,MAAN,CAAa,CAAb;AACH;;AAED,SAASjC,aAAT,GAAyB;AACrBrI,MAAEgH,OAAF,CAAU,0CAAV,EAAsD,EAACC,IAAI,KAAIL,KAAKM,GAAL,EAAT,EAAtD,EACKC,IADL,CACU,UAASoD,KAAT,EAAe;AACjB5L,eAAO4L,KAAP;AACAjE,mBAAW3H,IAAX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,KAdL,EAeKiK,IAfL,CAeU,UAASC,KAAT,EAAgBC,UAAhB,EAA4BC,KAA5B,EAAmC;AACrC,YAAIC,MAAMF,aAAa,IAAb,GAAoBC,KAA9B;AACA5C,gBAAQ4C,KAAR,CAAc,kBAAd,EAAkCC,GAAlC;AACH,KAlBL;AAmBH;;AAED,SAASwB,iBAAT,GAA6B;AACzB1L,cAAU,IAAV;AACAwH,eAAW3H,IAAX;AACH;;AAEDqB,EAAEyK,QAAF,EAAYC,KAAZ,CAAkB,YAAW;AACzB5D;AACH,CAFD","file":"auction-graph.js","sourcesContent":["var wei = 1e18;\r\nvar totalIssued;\r\nvar startTime, endTime, maxTime;\r\nvar chart = {}, chartData = {}, data;\r\nvar pollIntervalId, updateIntervalId;\r\nvar clicked;\r\n\r\nfunction getCurrentPriceAt(d) {\r\n    return getCurrentPrice(\r\n        data.status.price_start,\r\n        data.status.price_constant,\r\n        data.status.price_exponent,\r\n        (d.getTime() - startTime.getTime()) / 1e3\r\n    ) / wei;\r\n}\r\n\r\nfunction detectmob() {\r\n    if(window.innerWidth <= 700 ) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nvar verticalLinePlugin = {\r\n    renderVerticalLine: function(chartInstance, line) {\r\n        // line = {x: number, top: number, bottom: number, color: string, dashed: boolean}\r\n        if (!isNaN(line)) {\r\n            line = {x: line};\r\n        } else {\r\n            line = $.extend({}, line);\r\n        }\r\n        var yScale = chart.scales[chart.getDatasetMeta(0).yAxisID],\r\n            xScale = chart.scales[chart.getDatasetMeta(0).xAxisID];\r\n        line.x = xScale.getPixelForValue(line.x);\r\n        if (line.top === undefined) {\r\n            line.top = yScale.top;\r\n        } else {\r\n            line.top = yScale.getPixelForValue(line.top);\r\n        }\r\n        if (line.bottom === undefined) {\r\n            line.bottom = yScale.bottom;\r\n        } else {\r\n            line.bottom = yScale.getPixelForValue(line.bottom);\r\n        }\r\n        if (!line.color) {\r\n            line.color = 'white';\r\n        }\r\n        var context = chartInstance.chart.ctx;\r\n        context.save();\r\n\r\n        // render vertical line\r\n        context.beginPath();\r\n        context.strokeStyle = line.color;\r\n        if (line.dashed) {\r\n            context.setLineDash([5, 5]);\r\n        }\r\n        context.moveTo(line.x, line.top);\r\n        context.lineTo(line.x, line.bottom);\r\n        context.stroke();\r\n        context.restore();\r\n\r\n        // write label\r\n        // context.fillStyle = \"#ff0000\";\r\n        // context.textAlign = 'center';\r\n        // context.fillText('MY TEXT', lineLeftOffset, (scale.bottom - scale.top) / 2 + scale.top);\r\n    },\r\n\r\n    afterDatasetsDraw: function(chart, easing) {\r\n        if (chart.config.vLine && chart.config.vLine.push) {\r\n            for (var i=0; i < chart.config.vLine.length; ++i) {\r\n                var line = chart.config.vLine[i];\r\n                this.renderVerticalLine(chart, line);\r\n            }\r\n        } else if (chart.config.vLine !== undefined && !isNaN(chart.config.vLine)) {\r\n            this.renderVerticalLine(chart, chart.config.vLine);\r\n        }\r\n    }\r\n};\r\n\r\nChart.plugins.register(verticalLinePlugin);\r\n\r\nvar backgroundColorPlugin = {\r\n    beforeDraw: function(chartInstance) {\r\n        var ctx = chartInstance.chart.ctx;\r\n        ctx.fillStyle = 'transparent';\r\n        ctx.fillRect(0, 0, chartInstance.chart.width, chartInstance.chart.height);\r\n    }\r\n};\r\n\r\nChart.plugins.register(backgroundColorPlugin);\r\n\r\nfunction drawGraph() {\r\n    var ctx = $('#auction-graph');\r\n    if(!detectmob()) {\r\n        chart = new Chart(ctx, {\r\n            type: 'line',\r\n            data: chartData,\r\n            options: {\r\n                responsive: true,\r\n                maintainAspectRatio: false,\r\n                // title: {\r\n                //   display: true,\r\n                //   text: 'Chart.js Line Chart - Logarithmic'\r\n                // },\r\n                legend: {\r\n                    labels: {\r\n                        fontColor: 'white',\r\n                        fontSize: 16,\r\n                        boxWidth: 20,\r\n                        filter: function (item, data) {\r\n                            return data.datasets[item.datasetIndex].legend !== false;\r\n                        }\r\n                    }\r\n                },\r\n                tooltips: {\r\n                    mode: 'nearest',\r\n                    position: 'nearest',\r\n                    intersect: false,\r\n                    backgroundColor: '#404e9a',\r\n                    callbacks: {\r\n                        footer: function (tooltipItem, data) {\r\n                            return ''\r\n                        },\r\n                        label: function (tooltipItem, data) {\r\n                            var label = data.datasets[tooltipItem.datasetIndex].label;\r\n                            var y = tooltipItem.yLabel.toLocaleString(\r\n                                'en',\r\n                                {maximumFractionDigits: label == 'Implied Market Cap (ETH)' ? 0 : 4}\r\n                            );\r\n                            return [label + ': ' + y];\r\n                            //var price = (tooltipItem.yLabel / totalIssued).toLocaleString(\r\n                            //  'en',\r\n                            //  {maximumFractionDigits: 7}\r\n                            //);\r\n                            //return [label +': ' + y, 'Price (ETH/XCH): ' + price];\r\n                        }\r\n                    }\r\n                },\r\n                scales: {\r\n                    xAxes: [{\r\n                        display: true,\r\n                        type: 'time',\r\n                        time: {\r\n                            unit: 'day',\r\n                            unitStepSize: 3,\r\n                            tooltipFormat: 'lll',\r\n                            min: startTime,\r\n                        },\r\n                        ticks: {\r\n                            fontColor: 'white', // this here\r\n                        },\r\n                        gridLines: {\r\n                            color: 'rgba(255, 255, 255, 0.2)',\r\n                        },\r\n                    }],\r\n                    yAxes: [{\r\n                        id: 'fundingTarget',\r\n                        display: true,\r\n                        type: 'logarithmic',\r\n                        position: 'left',\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'Total ETH amount',\r\n                            lineHeight: 2,\r\n                            fontColor: 'white',\r\n                            fontSize: 15,\r\n                            padding: 4\r\n                        },\r\n                        ticks: {\r\n                            fontColor: 'white',\r\n                            min: 0.1,\r\n                            max: 1e6,\r\n                            autoSkip: false,\r\n                            callback: function (label) {\r\n                                var digits = label.toString().length;\r\n                                if (label % 1 !== 0) {\r\n                                    return label\r\n                                } else if (digits >= 7) {\r\n                                    return label / 1000000 + ' M';\r\n                                } else if (digits >= 4) {\r\n                                    return label / 1000 + ' K';\r\n                                } else {\r\n                                    return label;\r\n                                }\r\n                            }\r\n                        },\r\n                        gridLines: {\r\n                            color: 'rgba(255, 255, 255, 0.2)',\r\n                        },\r\n                        afterBuildTicks: function (lineChart) {\r\n                            lineChart.ticks = [1, 1e1, 1e2, 1e3, 1e4, 1e5, 1e6];\r\n                        },\r\n                        beforeUpdate: function (oScale) {\r\n                            return;\r\n                        }\r\n                    }, {\r\n                        id: 'price',\r\n                        display: true,\r\n                        // type: 'logarithmic',\r\n                        position: 'right',\r\n                        scaleLabel: {\r\n                            display: true,\r\n                            labelString: 'Price (ETH/XCH)',\r\n                            lineHeight: 2,\r\n                            fontColor: '#08D9D6',\r\n                            fontSize: 15,\r\n                            padding: 4\r\n                        },\r\n                        ticks: {\r\n                            fontColor: '#08D9D6',\r\n                            min: 0,\r\n                            max: 0.050,\r\n                            autoSkip: false,\r\n                            callback: function (label) {\r\n                                return label;\r\n                            }\r\n                        },\r\n                        gridLines: {\r\n                            color: 'rgba(8, 217, 214, 0.2)',\r\n                        },\r\n                        afterBuildTicks: function (lineChart) {\r\n                            lineChart.ticks = [0.010, 0.020, 0.030, 0.040, 0.050];\r\n                        },\r\n                        beforeUpdate: function (oScale) {\r\n                            return;\r\n                        }\r\n                    }]\r\n                }\r\n            }\r\n        });\r\n\r\n        ctx.click(function ($event) {\r\n            var pos = Chart.helpers.getRelativePosition($event, chart);\r\n            var d = chart.scales['x-axis-0'].getValueForPixel(pos.x).toDate();\r\n            var val = getCurrentPriceAt(d) * totalIssued;\r\n            console.log('$', d, val);\r\n            clicked = {x: d, y: val};\r\n            setAlertsValue();\r\n            updateData(data);\r\n        });\r\n    }\r\n}\r\n\r\nfunction getPriceCurve(start, end, step) {\r\n    var target = [];\r\n    var i = start;\r\n    while (i < end) {\r\n        target.push({\r\n            x: i,\r\n            y: getCurrentPriceAt(i) * totalIssued,\r\n        });\r\n        i = new Date(i.getTime() + step);\r\n    }\r\n    target.push({\r\n        x: end,\r\n        y: getCurrentPriceAt(end) * totalIssued,\r\n    });\r\n    return target;\r\n}\r\n\r\nfunction getPriceCurve2(start, end, step) {\r\n    var target = [];\r\n    var i = start;\r\n    while (i < end) {\r\n        target.push({\r\n            x: i,\r\n            y: getCurrentPriceAt(i),\r\n        });\r\n        i = new Date(i.getTime() + step);\r\n    }\r\n    target.push({\r\n        x: end,\r\n        y: getCurrentPriceAt(end),\r\n    });\r\n    return target;\r\n}\r\n\r\n// generates data for static funding target graph\r\nfunction getInitialData() {\r\n    $.when(\r\n        $.getJSON('assets/scripts/static.json'),\r\n        $.getJSON('assets/scripts/status.json', {ts: ''+Date.now()})\r\n    )\r\n        .done(function(staticRes, statusRes) {\r\n            $(window).trigger('resize');\r\n            data = statusRes[0];\r\n            var staticData = staticRes[0],\r\n                statusData = data.status;\r\n\r\n            if (statusData['auction_contract_address']) {\r\n                updateAuctionAddress(statusData['auction_contract_address']);\r\n            }\r\n\r\n            totalIssued = staticData.tokensOffered;\r\n            startTime = new Date(statusData.start_time * 1000);\r\n            endTime = new Date((staticData.endDate || (statusData.start_time + 30*86.4e3)) * 1000);\r\n            maxTime = endTime;\r\n\r\n            var fundingTargetData = getPriceCurve(startTime, endTime, 3.6e6, statusData);\r\n            var fundingTargetData2 = getPriceCurve2(startTime, endTime, 3.6e6, statusData);\r\n\r\n            chartData = {\r\n                datasets: [{\r\n                    yAxisID: 'price',\r\n                    label: 'Price (ETH)',\r\n                    borderWidth: 1.5,\r\n                    borderColor: '#08D9D6',\r\n                    data: fundingTargetData2,\r\n                    fill: false,\r\n                    radius: 0\r\n                },{\r\n                    yAxisID: 'fundingTarget',\r\n                    label: 'Implied Market Cap (ETH)',\r\n                    borderWidth: 1.5,\r\n                    borderColor: 'white',\r\n                    data: fundingTargetData,\r\n                    fill: false,\r\n                    radius: 0\r\n                }, {\r\n                    yAxisID: 'fundingTarget',\r\n                    label: 'Sent to Auction (ETH)',\r\n                    borderWidth: 1.5,\r\n                    borderColor: 'rgb(234, 234, 234)',\r\n                    backgroundColor: 'rgba(234, 234, 234, 0.25)',\r\n                    data: [],\r\n                    lineTension: 0,\r\n                    radius: 0\r\n                },{\r\n                    yAxisID: 'fundingTarget',\r\n                    label: 'Days To Target',\r\n                    borderColor: 'white',\r\n                    borderDash: [5,5],\r\n                    borderWidth: 1,\r\n                    fill: false,\r\n                    legend: false,\r\n                    data: [],\r\n                    lineTension: 0,\r\n                    radius: 0\r\n                }]\r\n            };\r\n            drawGraph();\r\n            updateDataAPI();\r\n            pollIntervalId = setInterval(updateDataAPI, 10e3);\r\n\r\n            // auction start date\r\n            var val = startTime.toLocaleString(\r\n                'en-gb', // 24h clock\r\n                {month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit'}\r\n            );\r\n            $('.auction-start').text(val);\r\n\r\n        })\r\n        .fail(function(jqxhr, textStatus, error) {\r\n            var err = textStatus + ', ' + error;\r\n            console.error('Request Failed: ', err);\r\n        });\r\n}\r\n\r\nfunction searchFor(arr, key, term) {\r\n    for (var i=0; i<arr.length; i++) {\r\n        if (arr[i] && arr[i][key] && arr[i][key].toLowerCase().indexOf(term.toLowerCase()) >= 0) {\r\n            return arr[i];\r\n        }\r\n    }\r\n}\r\n\r\nfunction updateData(data) {\r\n\r\n    var fundsRaisedData = [];\r\n\r\n    var target = [{x:0}];\r\n    var auction_stage = data.status.auction_stage;\r\n\r\n    if (data.histogram && data.histogram.bin_cumulative_sum) {\r\n        data.histogram.bin_cumulative_sum.forEach(function(bin, i) {\r\n            if (i >= data.histogram.timestamped_bins.length) return;\r\n            fundsRaisedData.push({\r\n                x: new Date(data.histogram.timestamped_bins[i] * 1000),\r\n                y: bin / wei\r\n            });\r\n        });\r\n    }\r\n    if (!fundsRaisedData.length){\r\n        fundsRaisedData = [\r\n            {x: startTime, y: 0},\r\n            {x: new Date(), y: 0},\r\n        ];\r\n    } else if (fundsRaisedData[0].x > startTime) {\r\n        fundsRaisedData.unshift(\r\n            {x: startTime, y: 0},\r\n            {x: new Date(fundsRaisedData[0].x.getTime()-1), y: 0}\r\n        );\r\n    }\r\n\r\n    // verticalLine\r\n    var nowX = new Date(Math.max(\r\n        Date.now(),\r\n        fundsRaisedData[fundsRaisedData.length - 1].x.getTime(),\r\n        startTime.getTime()\r\n    ));\r\n    if (auction_stage >= 3 || Math.abs(nowX.getTime() - data.status['timestamp']*1e3) > 600e3) { // 10min deviation\r\n        nowX = fundsRaisedData[fundsRaisedData.length-1].x;\r\n    }\r\n    //var nowX = new Date(fundsRaisedData[fundsRaisedData.length - 1].x);\r\n\r\n    var nowY = fundsRaisedData[fundsRaisedData.length - 1].y;\r\n\r\n    // horizontal dotted line on nowY\r\n    searchFor(chartData.datasets, 'label', 'Days').data = [{x: startTime, y: nowY}, {x: endTime, y: nowY}];\r\n\r\n    // funds raised\r\n    if (nowX > fundsRaisedData[fundsRaisedData.length-1].x) {\r\n        fundsRaisedData.push({x: nowX, y: nowY});\r\n    }\r\n    searchFor(chartData.datasets, 'label', 'Sent').data = fundsRaisedData;\r\n\r\n    $('.stat-price').text(Math.round(data.status.price / 1e13) / 1e5 + ' ETH/XCH')\r\n    $('.stat-sold').text(Math.round(data.status.raised_eth / data.status.price * 1e3) / 1e3 + ' XCH')\r\n    $('.stat-eth').text(Math.round(data.status.raised_eth / 1e13) / 1e5 + ' ETH')\r\n\r\n    chart.update(0);\r\n}\r\n\r\nfunction updateDataAPI() {\r\n    $.getJSON('https://xcico.azurewebsites.net/api/info', {ts: ''+ Date.now()})\r\n        .done(function(_data){\r\n            data = _data;\r\n            updateData(data);\r\n            //if (data.status.auction_stage >= 3) {\r\n            // clearInterval(pollIntervalId);\r\n            // pollIntervalId = null;\r\n            // clearInterval(updateIntervalId);\r\n            // updateIntervalId = null;\r\n            //} else if (!updateIntervalId) {\r\n            //  updateIntervalId = setInterval(function() {\r\n            //    updateData(data);\r\n            // }, 1e6);\r\n            // }\r\n        })\r\n        .fail(function(jqxhr, textStatus, error) {\r\n            var err = textStatus + ', ' + error;\r\n            console.error('Request Failed: ', err);\r\n        });\r\n}\r\n\r\nfunction clearClickedVline() {\r\n    clicked = null;\r\n    updateData(data);\r\n}\r\n\r\n$(document).ready(function() {\r\n    getInitialData();\r\n});"]}